    1  passwd
    2  ll
    3  lsblk
    4  df -hT
    5  cd gitlab/generic/
    6  date
    7  ./generic.sh 
    8  cron_yum_update 
    9  reboot
   10  os-release 
   11  psnokernel 
   12  ip r
   13  cd /etc/sysconfig/network-scripts/
   14  ll
   15  nmcli 
   16  vi ifcfg-enp3s0f1 
   17  ping crawler02
   18  vi ifcfg-enp3s0f1
   19  vi ifcfg-enp3s0f0
   20  ip r
   21  systemctl restart NetworkManager
   22  ip r
   23  route -n
   24  ping 8.8.8.8
   25  vi /etc/profile.d/proxy.sh 
   26  rm /etc/profile.d/proxy.sh 
   27  reboot
   28  ip r
   29  ping 8.8.8.8
   30  route -n
   31  os-release 
   32  subscription-manager list
   33  yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
   34  yum-config-manager --disable-repo docker-ce-edge
   35  yum-config-manager --disable docker-ce-edge
   36  yum-config-manager --disable docker-ce-test
   37  yum install docker-ce
   38  systemctl enable docker
   39  systemctl start docker
   40  docker ps
   41  df -hT
   42  top
   43  lsblk
   44  docker run hello-world
   45  yum install autofs glusterfs-fuse
   46  vi /etc/auto.master
   47  vi /etc/auto.gluster
   48  cd
   49  ll
   50  cd gitlab/
   51  ll
   52  git clone http://git/external_software/python2.git
   53  git clone http://git/external_software/python2-7.git
   54  cd python2-7/
   55  ll
   56  ./install
   57  cd ..
   58  git clone http://git/external_software/python3-6.git
   59  cd python3-6/
   60  ll
   61  ./install
   62  cd
   63  ll /usr/local/bin/
   64  python -V
   65  /usr/local/bin/python2.7 -V
   66  python3.6 -V
   67  which python3.6 
   68  which python3
   69  psnokernel 
   70  vi /etc/auto.gluster 
   71  mkdir /mnt/gluster
   72  systemctl status autofs
   73  systemctl enable autofs
   74  systemctl start autofs
   75  all /mnt/gluster/fc/
   76  df -hT
   77  cat /proc/mounts 
   78  reboot
   79  psnokernel 
   80  docker ps
   81  all /mnt/gluster/fc/
   82  df -hT
   83  cron_yum_update 
   84  findmnt 
   85  df -h
   86  all /mnt/gluster/fc/
   87  df -h
   88  df -hT
   89  all /mnt/gluster/fc/
   90  curl https://www.google.com
   91  curl -v http://www.google.com
   92  curl -v http://www.google.com | more
   93  curl -v http://www.google.com  2>&1| more
   94  mkdir github
   95  cd github/
   96  ls /mnt/
   97  ls /mnt/gluster/fc/
   98  df
   99  git clone https://github.com/ukwa/ukwa-ingest-services.git
  100  cd ukwa-ingest-services/
  101  ls
  102  cd deploy/
  103  ls
  104  cd crawl-engine/
  105  ls
  106  cd prod/
  107  ls
  108  cd ..
  109  git mv prod prod-old
  110  mkdir prod
  111  cp test/docker-compose.yml .
  112  mkdir prod/crawler-npld
  113  mkdir prod/kafka
  114  cp test/docker-compose.yml prod/crawler-npld/
  115  cd prod/crawler-npld/
  116  ls
  117  git add docker-compose.yml
  118  git commit -m "Import test setup." .
  119  vim docker-compose.yml 
  120  cd ..
  121  ls
  122  git mv kafka/ fc-kafka
  123  mv kafka fc-kafka
  124  git mv crawler-npld fc-npld
  125  mkdir fc-wb
  126  cp fc-npld/docker-compose.yml fc-kafka/
  127  cp fc-npld/docker-compose.yml fc-wb
  128  vim fc-npld/docker-compose.yml 
  129  cd fc-npld/
  130  cp -r ../../test/prometheus .
  131  vim prometheus/prometheus.yml 
  132  cd ../fc-kafka/
  133  vim docker-compose.yml 
  134  cd ../fc-wb/
  135  vim docker-compose.yml 
  136  cd ..
  137  ls
  138  vim README.md
  139  git mv fc-npld fc-crawl
  140  cd fc-crawl/
  141  vim docker-compose.yml 
  142  cd ../fc-kafka/
  143  git add docker-compose.yml
  144  vim docker-compose.yml 
  145  cd ../../test
  146  ls
  147  ls -l
  148  vmi docker-compose.yml 
  149  vim docker-compose.yml 
  150  cd -
  151  vim docker-compose.yml 
  152  ping crawler05
  153  ping crawler05.bl.uk
  154  vim ../prod-env.sh
  155  vim docker-compose.yml 
  156  vim ../prod-env.sh 
  157  ls /mnt/gluster/fc/
  158  vim docker-compose.yml 
  159  vim ../prod-env.sh 
  160  source ../prod-env.sh 
  161  docker stack deploy -c docker-compose.yml fc_kafka 
  162  docker swarm init
  163  docker swarm init --advertise-addr 192.168.45.15
  164  docker stack deploy -c docker-compose.yml fc_kafka 
  165  docker service ls
  166  docker service ps dc_zookeeper
  167  docker service ps fc_kafka_zookeeper 
  168  mkdir /mnt/gluster/fc/zookeeper
  169  vim docker-compose.yml 
  170  mkdir /mnt/gluster/fc/zookeeper/data
  171  mkdir /mnt/gluster/fc/zookeeper/datalog
  172  history
  173  vim ../README.md 
  174  docker service ps fc_kafka_zookeeper 
  175  mkdir /mnt/gluster/fc/kafka
  176  history | grep mkdir
  177  vim ../README.md 
  178  docker service ls
  179  vim docker-compose.yml 
  180  exit
  181  cd github/ukwa-ingest-services/
  182  git pull
  183  cd deploy/crawl-engine/prod
  184  ls
  185  mv README.md temp
  186  git pull
  187  cd ../prod-old/
  188  git diff README.md
  189  cd ..
  190  mv prod prod-new
  191  git mv prod-old/ prod
  192  git pull
  193  ls prod
  194  git checkout prod
  195  git pull
  196  git reset prod
  197  git pull
  198  cd prod-new/
  199  ls
  200  cd fc-kafka/
  201  cp -r ../../test/prom-jmx .
  202  docker service ps fc_kafka_zookeeper 
  203  docker service ps fc_kafka_kafka
  204  docker service ps fc_kafka_kafka --no-trunc
  205  docker stack deploy -c docker-compose.yml fc_kafka 
  206  docker service ps fc_kafka_kafka --no-trunc
  207  docker service ls
  208  source ../prod-env.sh 
  209  docker stack deploy -c docker-compose.yml fc_kafka 
  210  echo source ../prod-env.sh > deploy.sh
  211  echo docker stack deploy -c docker-compose.yml fc_kafka  >> deploy.sh 
  212  docker service ls
  213  ls /mnt/gluster/fc/zookeeper/data
  214  ls /mnt/gluster/fc/kafka/
  215  ls /mnt/gluster/fc/kafka/kafka-logs/kafka-logs-broker-1/
  216  vim deploy.sh 
  217  git add deploy.sh
  218  git add docker-compose.yml prom-jmx/
  219  cd ..
  220  mv temp README.md
  221  git add README.md
  222  git add fc-crawl
  223  git add fc-wb/
  224  git commit -m "Kafka done, working on the rest." .
  225  vim fc-crawl/
  226  networks
  227  docker ls networks
  228  docker ls network
  229  docker networks ls
  230  docker network ls
  231  cd fc-crawl/
  232  cp ../fc-kafka/deploy.sh .
  233  vim deploy.sh
  234  vim docker-compose.yml 
  235  docker service ls
  236  cd ../fc-kafka/
  237  vim docker-compose.yml 
  238  cd -
  239  vim docker-compose.yml 
  240  diff docker-compose.yml ../../test/docker-compose.yml 
  241  diff docker-compose.yml ../../test/docker-compose.yml  | more
  242  vim docker-compose.yml 
  243  diff docker-compose.yml ../../test/docker-compose.yml  | more
  244  vim docker-compose.yml 
  245  diff docker-compose.yml ../../test/docker-compose.yml  | more
  246  vim docker-compose.yml 
  247  diff docker-compose.yml ../../test/docker-compose.yml  | more
  248  vim docker-compose.yml 
  249  vim ../prod-env.sh 
  250  vim docker-compose.yml 
  251  diff docker-compose.yml ../../test/docker-compose.yml  | more
  252  vim  ../../test/docker-compose.yml 
  253  vim docker-compose.yml 
  254  vim ../fc-kafka/docker-compose.yml 
  255  vim docker-compose.yml 
  256  df
  257  df -h
  258  mkdir /var/heritrix
  259  mkdir /var/heritrix/state
  260  mkdir /mnt/gluster/fc/heritrix
  261  mkdir /mnt/gluster/fc/output
  262  vim docker-compose.yml 
  263  ls /var/heritrix/state/
  264  vim docker-compose.yml 
  265  mkdir /mnt/gluster/fc/surts
  266  mkdir /mnt/gluster/fc/surts/npld
  267  vim docker-compose.yml 
  268  mkdir /mnt/gluster/fc/heritrix/output
  269  mkdir /mnt/gluster/fc/heritrix/wren
  270  rmdir /mnt/gluster/fc/output
  271  vim docker-compose.yml 
  272  vim prometheus/prometheus.yml 
  273  vim docker-compose.yml 
  274  vim prometheus/prometheus.yml 
  275  more deploy.sh 
  276  sh deploy.sh 
  277  docker ps
  278  dig crawler05.bl.uk
  279  vim ../README.md 
  280  docker service ls
  281  docker service ps fc_crawl_prometheus 
  282  docker service ps fc_crawl_prometheus --no-trunc
  283  mkdir /mnt/gluster/fc/prometheus-data
  284  docker service ps fc_crawl_prometheus --no-trunc
  285  docker service ps fc_crawl_npld-heritrix-worker 
  286  docker service logs fc_crawl_npld-heritrix-worker 
  287  docker service logs fc_crawl_npld-heritrix-worker | more
  288  vim ../README.md 
  289  exit
  290  docker ps
  291  curl localhost:9000
  292  curl 192.168.45.15:9000
  293  ping crawler05.bl.uk
  294  firewall-cmd --permanent --add-port=9094/tcp
  295  docker service logs fc_crawl_npld-heritrix-worker | more
  296  docker service logs fc_crawl_npld-heritrix-worker 
  297  docker service logs -f fc_crawl_npld-heritrix-worker 
  298  pwd
  299  cd github/ukwa-ingest-services/
  300  cd deploy/crawl-engine/prod-new/fc-kafka/
  301  ls
  302  vim docker-compose.yml 
  303  docker service update --force fc_kafka_kafka-ui 
  304  docker system prune -y
  305  docker system prune -f
  306  docker logs fc_kafka_kafka
  307  docker logs fc_kafka_kafka.1.s1ima7sbgt6m4s5cqoptp08hj 
  308  vim docker-compose.yml 
  309  sh deploy.sh 
  310  docker system prune -f
  311  docker logs fc_kafka_kafka.1.cqpih7irtg3qf173k54tkgaga 
  312  docker logs fc_kafka_kafka.1.cqpih7irtg3qf173k54tkgaga  | more
  313  vim docker-compose.yml 
  314  sh deploy.sh 
  315  docker service update --force fc_kafka_kafka-ui 
  316  history > history.log
